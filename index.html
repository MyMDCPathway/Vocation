<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>MDC Career Pathway Infographic</title>

    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>

    <!-- Load Inter font --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons for buttons --><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <style>

        /* Use Inter as the default font */

        body {

            font-family: 'Inter', sans-serif;

        }



        /* New Flowchart Styles */

        .flowchart-container {

            display: flex;

            flex-direction: row;

            align-items: stretch; /* Make cards same height */

            overflow-x: auto;

            padding: 1.5rem;

            background-color: #f9fafb; /* Light gray bg for contrast */

            border-radius: 0.75rem; /* rounded */

            margin-bottom: 1.5rem; /* Space */

        }



        .flowchart-step {

            flex: 0 0 300px; /* Don't shrink, 300px width */

            display: flex;

            flex-direction: column;

            border: 1px solid #e5e7eb; /* gray-200 */

            border-radius: 0.75rem; /* lg */

            background-color: white;

            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */

            overflow: hidden; /* For rounded corners on border-top */

        }



        .flowchart-step-header {

            display: flex;

            align-items: center;

            padding: 1rem;

            border-top-width: 4px;

        }

        .flowchart-step-header-icon {

            width: 2rem;

            height: 2rem;

            display: flex;

            align-items: center;

            justify-content: center;

            border-radius: 9999px; /* full */

            background-color: #e5e7eb; /* gray-200 */

            margin-right: 0.75rem;

            flex-shrink: 0;

        }

        .flowchart-step-content {

            padding: 1rem;

            flex-grow: 1; /* Make content area fill height */

        }

        

        .flowchart-connector {

            flex: 0 0 50px; /* Don't grow/shrink, 50px width */

            position: relative;

            align-self: center; /* Center vertically */

            height: 20px; /* Give it some height for centering */

        }

        

        /* Horizontal line for connector */

        .flowchart-connector::after {

            content: '';

            position: absolute;

            top: 50%;

            left: 0;

            width: 100%;

            height: 3px;

            background-color: #cbd5e1; /* gray-300 */

            transform: translateY(-50%);

        }



        /* Step-specific colors */

        .flowchart-step-degree .flowchart-step-header { border-color: #3b82f6; } /* Blue */

        .flowchart-step-degree .flowchart-step-header-icon { background-color: #dbeafe; color: #3b82f6; }

        .flowchart-step-degree .flowchart-step-header span { color: #3b82f6; }



        .flowchart-step-transfer .flowchart-step-header { border-color: #f97316; } /* Orange */

        .flowchart-step-transfer .flowchart-step-header-icon { background-color: #ffedd5; color: #f97316; }

        .flowchart-step-transfer .flowchart-step-header span { color: #f97316; }



        .flowchart-step-internship .flowchart-step-header { border-color: #10b981; } /* Green */

        .flowchart-step-internship .flowchart-step-header-icon { background-color: #d1fae5; color: #10b981; }

        .flowchart-step-internship .flowchart-step-header span { color: #10b981; }



        .flowchart-step-exam .flowchart-step-header { border-color: #8b5cf6; } /* Purple */

        .flowchart-step-exam .flowchart-step-header-icon { background-color: #ede9fe; color: #8b5cf6; }

        .flowchart-step-exam .flowchart-step-header span { color: #8b5cf6; }

        

        /* Loading Spinner */

        .loader {

            border: 4px solid #f3f3f3; /* Light grey */

            border-top: 4px solid #3b82f6; /* Blue */

            border-radius: 50%;

            width: 40px;

            height: 40px;

            animation: spin 1s linear infinite;

        }

        @keyframes spin {

            0% { transform: rotate(0deg); }

            100% { transform: rotate(360deg); }

        }

        

        /* Hide scrollbar when modal is open */

        .modal-open {

            overflow: hidden;

        }



        /* Style for the clear button inside the input */

        .input-container {

            position: relative;

            flex-grow: 1;

            width: 100%;

        }

        #clear-input-btn {

            position: absolute;

            top: 50%;

            right: 1rem;

            transform: translateY(-50%);

            cursor: pointer;

            color: #9ca3af; /* gray-400 */

            display: none; /* Hidden by default */

        }

        #clear-input-btn:hover {

            color: #6b7280; /* gray-500 */

        }

    </style>

</head>

<body class="bg-gray-100 min-h-screen">



    <div class="bg-white min-h-screen">

        <!-- Header Section --><header class="p-6 md:p-8 text-center">

            <img src="https://mdcwap.mdc.edu/apply/assets/mdc-logo.png" alt="Miami Dade College Logo" class="h-16 w-auto mx-auto mb-4">

            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">

                MyMDC Pathway

            </h1>

            <p class="text-gray-600 mt-2">

                Generate an educational pathway for your career.

            </p>

        </header>



        <!-- Control Section --><div class="px-6 pb-6 md:px-8 md:pb-8">

            <!-- New Divider -->

            <hr class="max-w-2xl mx-auto border-gray-200 mb-8">

            

            <!-- Custom Career AI Generation --><div class="max-w-2xl mx-auto">

                <label for="custom-career-input" class="block text-sm font-medium text-gray-700 mb-2">

                    Specify your Career Choice:

                    <i id="help-btn" class="fas fa-question-circle text-blue-500 hover:text-blue-700 cursor-pointer ml-1"></i>

                </label>

                <div class="flex flex-col sm:flex-row items-center sm:space-x-2 space-y-2 sm:space-y-0">

                    <!-- Container for input and clear button --><div class="input-container">

                        <input type="text" id="custom-career-input" placeholder="e.g., Mechanical Engineer" class="w-full py-3 pl-5 pr-10 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">

                        <span id="clear-input-btn" title="Clear input">

                            <i class="fas fa-times-circle"></i>

                        </span>

                    </div>

                    <button id="generate-pathway-btn" class="flex-shrink-0 w-full sm:w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-full shadow-md transition duration-200 flex items-center justify-center p-0">

                        <i class="fas fa-arrow-right"></i>

                    </button>

                </div>

            </div>

        </div>



        <!-- Infographic Display Area --><div id="pathway-display" class="p-6 md:p-8">

            <!-- Pathway will be dynamically generated here --></div>

    </div>



    <!-- Loading Overlay --><div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden items-center justify-center p-4">

        <div class="bg-white p-6 rounded-lg shadow-xl flex flex-col items-center space-y-4">

            <div class="flex items-center space-x-4">

                <div class="loader"></div>

                <span id="loading-text" class="text-gray-700 font-medium">Loading...</span>

            </div>

            <button id="cancel-load-btn" class="mt-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 text-sm font-medium rounded-lg">

                Cancel

            </button>

        </div>

    </div>



    <!-- Message Modal for AI Content --><div id="modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">

        <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col">

            <header class="p-5 border-b border-gray-200 flex justify-between items-center">

                <h2 id="modal-title" class="text-xl font-bold text-gray-800">MDC Details</h2>

                <button id="modal-close-btn" class="text-gray-400 hover:text-gray-600">

                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">

                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />

                    </svg>

                </button>

            </header>

            <main id="modal-content" class="p-6 overflow-y-auto">

                <!-- AI content will be injected here --></main>

        </div>

    </div>



    <!-- Inline JavaScript --><script>

        // --- Gemini API Configuration ---

        const apiKey = ""; // API key will be injected by the environment

        const genModel = "gemini-2.5-flash-preview-09-2025";

        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${genModel}:generateContent?key=${apiKey}`;

        

        // --- Controller for aborting fetch requests ---

        let currentAbortController = null;



        // --- Data for the Pathways ---

        // Removed preset pathways object



        // --- SVG Icons ---

        const icons = {

            degree: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.747 0-3.332.477-4.5 1.253" /></svg>`,

            transfer: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" /></svg>`,

            internship: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>`,

            exam: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`

        };



        // --- DOM Elements ---

        const display = document.getElementById('pathway-display');

        const customInput = document.getElementById('custom-career-input');

        const generateBtn = document.getElementById('generate-pathway-btn');

        const loadingOverlay = document.getElementById('loading-overlay');

        const loadingText = document.getElementById('loading-text');

        const cancelLoadBtn = document.getElementById('cancel-load-btn');

        const modal = document.getElementById('modal');

        const modalTitle = document.getElementById('modal-title');

        const modalContent = document.getElementById('modal-content');

        const modalCloseBtn = document.getElementById('modal-close-btn');

        const helpBtn = document.getElementById('help-btn');

        const clearInputBtn = document.getElementById('clear-input-btn');



        // --- Loading and Modal Functions ---

        function showLoading(message) {

            loadingText.textContent = message || 'Loading...';

            loadingOverlay.classList.remove('hidden');

            loadingOverlay.classList.add('flex');

        }



        function hideLoading() {

            loadingOverlay.classList.add('hidden');

            loadingOverlay.classList.remove('flex');

        }



        function showModal(title, content) {

            modalTitle.textContent = title;

            modalContent.innerHTML = content; // Using innerHTML to render formatted text

            modal.classList.remove('hidden');

            modal.classList.add('flex');

            document.body.classList.add('modal-open');

        }



        function hideModal() {

            modal.classList.add('hidden');

            modal.classList.remove('flex');

            document.body.classList.remove('modal-open');

        }



        // --- Event Listener for Cancel Button ---

        cancelLoadBtn.addEventListener('click', () => {

            if (currentAbortController) {

                currentAbortController.abort(); // Send abort signal

                console.log("Fetch request cancelled.");

            }

            hideLoading();

        });



        // --- Modal Close Listeners ---

        modalCloseBtn.addEventListener('click', hideModal);

        modal.addEventListener('click', (e) => {

            if (e.target === modal) { // Click on overlay

                hideModal();

            }

        });



        // --- Help Button Listener ---

        helpBtn.addEventListener('click', () => {

            showModal('How to use MyMDC Pathway?', `

                <div class="space-y-4 text-gray-700">

                    <p>1. Type your desired career (e.g., "Software Engineer" or "Nurse") into the text box.</p>

                    <p>2. Press <kbd class="px-2 py-1 bg-gray-200 rounded-md text-sm">Enter</kbd> or click the blue arrow button to generate a personalized educational pathway.</p>

                    <p>3. The pathway will show you recommended degrees from MDC, potential transfer steps to universities, and other milestones like internships and exams.</p>

                </div>

            `);

        });



        // --- Clear Input Button Listeners ---

        customInput.addEventListener('input', () => {

            clearInputBtn.style.display = customInput.value ? 'block' : 'none';

        });

        clearInputBtn.addEventListener('click', () => {

            customInput.value = '';

            clearInputBtn.style.display = 'none';

            customInput.focus();

        });



        // --- Render Function ---

        function renderPathwayData(data) {

            if (!data || !data.title || !data.steps) {

                console.error('Invalid data for rendering:', data);

                display.innerHTML = `<p class="text-red-500">Could not render pathway. Invalid data format.</p>`;

                return;

            }



            // Clear previous content

            display.innerHTML = '';



            // --- Create Title and Clear Button Wrapper ---

            const titleWrapper = document.createElement('div');

            titleWrapper.className = 'flex flex-col sm:flex-row justify-between sm:items-center mb-8 gap-4';



            // Add title

            const titleEl = document.createElement('h2');

            titleEl.className = "text-2xl font-bold text-gray-800";

            titleEl.textContent = data.title;

            titleWrapper.appendChild(titleEl);

            

            // Add Clear Pathway Button

            const clearBtn = document.createElement('button');

            clearBtn.id = 'clear-pathway-btn';

            clearBtn.className = 'px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-lg shadow w-full sm:w-auto flex-shrink-0';

            clearBtn.innerHTML = '<i class="fas fa-times mr-2"></i> Clear Pathway';

            clearBtn.onclick = () => {

                display.innerHTML = ''; // Clear the display

            };

            titleWrapper.appendChild(clearBtn);



            // Add the whole title section to the display

            display.appendChild(titleWrapper);



            // Create container for steps

            const flowchartContainer = document.createElement('div');

            flowchartContainer.className = "flowchart-container"; 



            // Generate HTML for each step

            data.steps.forEach((step, stepIndex) => {

                const stepTypeClass = `flowchart-step-${step.type}`;



                // Add connector *before* this step, if it's not the first one

                if (stepIndex > 0) {

                    const connectorEl = document.createElement('div');

                    connectorEl.className = 'flowchart-connector';

                    flowchartContainer.appendChild(connectorEl);

                }

                

                let transferButtonHtml = '';

                if (step.type === 'transfer') {

                    // Replaced button with a direct link

                    transferButtonHtml = `

                        <a href="https://www.mdc.edu/transfer-information/transfer-agreements/" target="_blank" rel="noopener noreferrer" class="mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-150">

                            <i class="fas fa-external-link-alt mr-2"></i> View Transfer Agreements

                        </a>

                    `;

                }



                let programInfoButtonHtml = ''; 

                if (step.type === 'degree' && step.level.includes('MDC')) { 

                    // Changed from <button> to <a> tag pointing to MDC search

                    programInfoButtonHtml = `

                        <a href="https://www.mdc.edu/search/?q=${encodeURIComponent(step.name)}" target="_blank" rel="noopener noreferrer" class="mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150">

                            <i class="fas fa-external-link-alt mr-2"></i> View Program Page

                        </a>

                    `; 

                } 



                const stepEl = document.createElement('div');

                stepEl.className = `flowchart-step ${stepTypeClass}`;

                

                stepEl.innerHTML = `

                    <div class="flowchart-step-header">

                        <div class="flowchart-step-header-icon">

                            ${icons[step.type] || ''}

                        </div>

                        <span class="text-xs font-semibold uppercase tracking-wider">

                            ${step.level || step.type}

                        </span>

                    </div>

                    <div class="flowchart-step-content">

                        <h3 class="text-lg font-semibold text-gray-900">${step.name}</h3>

                        <p class="text-gray-600 mt-2">${step.description}</p>

                        ${transferButtonHtml}

                        ${programInfoButtonHtml}

                    </div>

                `;

                flowchartContainer.appendChild(stepEl);

            });

            

            display.appendChild(flowchartContainer);

        }



        // --- Gemini API Call Function ---

        async function callGemini(payload, retries = 3, delay = 1000) {

            // Create a new AbortController for this call

            currentAbortController = new AbortController();

            

            for (let i = 0; i < retries; i++) {

                try {

                    const response = await fetch(apiUrl, {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify(payload),

                        signal: currentAbortController.signal // Pass the signal to fetch

                    });



                    if (!response.ok) {

                        throw new Error(`HTTP error! status: ${response.status}`);

                    }

                    

                    const result = await response.json();

                    

                    if (result.candidates && result.candidates.length > 0) {

                        return result; // Success

                    } else if (result.promptFeedback) {

                         throw new Error(`Request blocked: ${result.promptFeedback.blockReason}`);

                    } else {

                        throw new Error('No candidates returned from API.');

                    }



                } catch (error) {

                    if (error.name === 'AbortError') {

                        console.log('Fetch aborted by user.');

                        throw error; // Rethrow abort error to stop retries

                    }

                    console.error(`API call attempt ${i + 1} failed:`, error);

                    if (i === retries - 1) {

                        throw error; // Rethrow last error

                    }

                    await new Promise(res => setTimeout(res, delay * Math.pow(2, i))); // Exponential backoff

                } finally {

                    if (i === retries - 1) {

                        currentAbortController = null; // Clear controller after final attempt

                    }

                }

            }

        }



        // --- Event Handler: Generate Custom Pathway ---

        async function handleGeneratePathway() {

            const career = customInput.value.trim();

            if (!career) {

                showModal('Error', '<p class="text-red-600">Please enter a career title.</p>');

                return;

            }



            showLoading(`Generating pathway for ${career}...`);

            

            // --- UPDATED SYSTEM PROMPT ---

            const systemPrompt = `You are a career and academic advisor at Miami Dade College (MDC). Your task is to generate an educational pathway for a student interested in a specific career.

When selecting an MDC degree or certificate, use your knowledge of programs listed on MDC's official program pages (associate: https://www.mdc.edu/academics/programs/associate.aspx, bachelor: https://www.mdc.edu/academics/programs/bachelor.aspx, certificate: https://www.mdc.edu/academics/programs/certificate.aspx) to ensure the recommendation is accurate and relevant.

For ANY step with type 'degree' (A.A., A.S., B.S., M.S., etc.), the 'name' field MUST contain the full, official program title, such as "Associate in Arts in Biology" or "Associate in Science in Nursing". Do not use generic names.

The pathway MUST start with an MDC degree/certificate, include a transfer step if it's an A.A./A.S., and list key internships, optional or required exams/certifications, and optional advanced degrees (M.S., Ph.D.).

You must only respond with a JSON object.`;



            const userQuery = `Generate the pathway for a "${career}".`;

            

            const pathwaySchema = {

                type: "OBJECT",

                properties: {

                    title: { type: "STRING", description: `Pathway to becoming a ${career}` },

                    steps: {

                        type: "ARRAY",

                        items: {

                            type: "OBJECT",

                            properties: {

                                type: { type: "STRING", enum: ["degree", "transfer", "internship", "exam"] },

                                level: { type: "STRING", description: "e.g., A.A. (MDC), B.S., M.S. (Optional), or type of step" },

                                name: { type: "STRING", description: "Name of the degree, exam, or step" },

                                description: { type: "STRING", description: "A 1-2 sentence description of this step." }

                            },

                            required: ["type", "level", "name", "description"]

                        }

                    }

                },

                required: ["title", "steps"]

            };



            const payload = {

                contents: [{ parts: [{ text: userQuery }] }],

                systemInstruction: { parts: [{ text: systemPrompt }] },

                generationConfig: {

                    responseMimeType: "application/json",

                    responseSchema: pathwaySchema

                }

            };



            try {

                const result = await callGemini(payload);

                const text = result.candidates[0].content.parts[0].text;

                const generatedData = JSON.parse(text);

                

                renderPathwayData(generatedData);



            } catch (error) {

                if (error.name !== 'AbortError') { // Don't show modal if user cancelled

                    console.error('Error generating custom pathway:', error);

                    showModal('Generation Failed', `<p class="text-red-600">Sorry, I couldn't generate a pathway for that career. Please try a different prompt.<br><br><small>Error: ${error.message}</small></p>`);

                }

            } finally {

                hideLoading();

            }

        }

        

        // --- Event Listeners for Generate ---

        generateBtn.addEventListener('click', handleGeneratePathway);



        customInput.addEventListener('keydown', (event) => {

            if (event.key === 'Enter') {

                event.preventDefault(); // Prevent default behavior

                handleGeneratePathway();

            }

        });





        // --- Event Handler: Find Transfer Info (Grounded) ---

        // This function is no longer needed and has been removed.



        // --- Event Handler: Find Program Info (GDrounded) --- // <<< REMOVED

        /*

        window.handleFindProgramInfo = async function(programName, programDescription) {

            // ... (Function code removed as it's no longer used) ...

        }

        */



        // --- Initial Render ---

        // (No initial render)



    </script>

</body>

</html>

